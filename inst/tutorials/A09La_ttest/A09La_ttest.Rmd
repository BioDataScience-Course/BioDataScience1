---
title: "Test t de Student"
author: "Guyliann Engels & Philippe Grosjean"
description: "**SDD I Module 9** La distribution et le test t de Student."
tutorial:
  id: "A09La_ttest"
  version: 2.0.0/9
output:
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
---
```{r setup, include=FALSE}
BioDataScience1::learnr_setup()
SciViews::R()
```

```{r, echo=FALSE}
BioDataScience1::learnr_banner()
```

```{r, context="server"}
BioDataScience1::learnr_server(input, output, session)
```

----

## Objectifs

- D√©couvrir la distribution *t* de Student

- Comprendre le principe de la distribution d'un √©chantillon

- Appr√©hender l'intervalle de confiance, savoir le calculer et l'utiliser

- Comprendre les diff√©rentes variantes du test *t* de Student et √™tre capable de l'utiliser pour r√©soudre des questions pratiques en biologie


## Moyenne

Un √©chantillon repr√©sentatif d'une population peut √™tre d√©crit par plusieurs descripteurs statistiques comme la moyenne, l'√©cart-type ou encore le coefficient de variation.

### Moyenne

Un premier descripteur est donc la moyenne de l'√©chantillon qui est calcul√© via l'√©quation suivante :

$$\bar{x}=\sum_{i=1}^n{\frac{x_i}{n}}$$

En partant de la s√©rie de nombre ci-dessous, r√©alisez les calculs suivants :

```{r, echo = TRUE}
(var <- sample(x = 1:10, size = 3))
```

```{r qu_mean}
question("Calculez la moyenne sur la s√©rie de nombre ci-dessus",
         answer(sprintf("%.2f", mean(var)), correct = TRUE),
         answer(sprintf("%.2f", sum(var))),
         answer(sprintf("%.2f", (mean(var)+1))),
         answer(sprintf("%.2f", (sum(var)/2))),
         allow_retry = TRUE,
         random_answer_order = TRUE,
         incorrect = "Recommencez afin de trouver la bonne r√©ponse",
         correct = "Bravo, c'est correct")
```

### Moyenne du vecteur `vec`

Utilisez une fonction dans R afin de calculer la moyenne du vecteur `vec`.

```{r, echo = TRUE}
vec <- c(14, 24, 32, 18, 19)
```

```{r mean1_h2, exercise = TRUE}
(vec <- c(14, 24, 32, 18, 19))
# Calculez ci-dessous la moyenne de vec

```

```{r mean1_h2-hint-1}
(vec <- c(14, 24, 32, 18, 19))
# Calculez ci-dessous la moyenne de vec : 
# Utilisez la foncion mean()

```

```{r mean1_h2-solution}
(vec <- c(14, 24, 32, 18, 19))
## Solution ##
mean(vec)
```

```{r mean1_h2-check}
grade_result(
  pass_if(~ identical(.result, mean(vec)), "Bien jou√© !")
)
```

### Moyenne du vecteur `vec2`

Utilisez une fonction dans R afin de calculer la moyenne du vecteur `vec2`.

```{r, echo = TRUE}
vec2 <- c(14, 3, 32, NA, 40)
```

```{r mean2_h3, exercise = TRUE}
(vec2 <- c(14, 3, 32, NA, 40))
# Calculez ci-dessous la moyenne de vec

```

```{r mean2_h3-hint-1}
(vec2 <- c(14, 3, 32, NA, 40))
# Calculez ci-dessous la moyenne de vec : 
# Utilisez la foncion mean()

```

```{r mean2_h3-hint-2}
(vec2 <- c(14, 3, 32, NA, 40))
# Calculez ci-dessous la moyenne de vec : 
# Utilisez la foncion mean(), utilisez l'argument na.rm = 

```

```{r mean2_h3-solution}
(vec2 <- c(14, 3, 32, NA, 40))
## Solution ##
mean(vec, na.rm = TRUE)
```

```{r mean2_h3-check}
grade_result(
  pass_if(~ identical(.result, mean(vec2, na.rm = TRUE)), "Bien jou√© !")
)
```

### Ecart-type

Un second descripteur d'un √©chantillon est l'√©cart-type qui est calcul√© via l'√©quation suivante :

$$s = \sqrt {s^2}$$

L'√©cart-type est la racine carr√© de la variance qui est √©galement un descripteur statistique de l'√©chantillon. 

La variance de l'√©chantillon qui est calcul√©e via l'√©quation suivante :

$$s^2 = \sum\limits_{i=1}^n \frac{(y_i - \bar y)^2}{n-1}$$

Il existe √©galement des fonctions dans R afin de calculer la variance et l'√©cart-type. Calculez l'√©cart-type du vecteur `vec3`

```{r, echo = TRUE}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
```

```{r sd1_h2, exercise = TRUE}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
# Calculez l'√©cart-type

```

```{r sd1_h2-hint-1}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
# Calculez l'√©cart-type utilisez la fonction sd()
```

```{r sd1_h2-solution}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
# Calculez l'√©cart-type
sd(vec3)
```

```{r sd1_h2-check}
grade_result(
  pass_if(~ identical(.result, sd(vec3)), "Bien jou√© !")
)
```


### Coefficient de variation 

Un autre descripteur est le coefficient de variation de l'√©chantillon qui est calcul√© via 

$$cv \ (\%) = \frac{s}{\bar y} \times 100$$

Calculez le coefficient de variation du vecteur `vec3`

```{r, echo = TRUE}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
```

```{r cv1_h2, exercise = TRUE}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
# Calculez le coefficient de variation 

```

```{r cv1_h2-hint-1}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
# Calculez le coefficient de variation : utilisez la fonction sd() et la fonction mean
```

```{r cv1_h2-solution}
vec3 <- c(22, 18, 4, 24, 34, 3, 9)
# Calculez l'√©cart-type
sd(vec3)/mean(vec3)*100
```

```{r cv1_h2-check}
grade_result(
  pass_if(~ identical(.result, (sd(vec3)/mean(vec3))*100), "Bien jou√© !")
)
```


### Tableau r√©sum√©

En partant du jeu de donn√©es propos√© ci-dessous qui porte sur la croissance des dents de cochons d'Inde, reproduisez le tableau ci-dessous.

```{r}
# Importation du jeu de donn√©es ToothGrowth
tooth_growth <- read("ToothGrowth", package = "datasets")

tooth_growth %>.%
  group_by(., supp, dose) %>.%
  summarise(., mean = mean(len), sd = sd(len), n = n())
```

Le tableau de donn√©es comprend les variables suivantes : `r colnames(tooth_growth)` 

```{r, echo = TRUE}
# Importation du jeu de donn√©es ToothGrowth
tooth_growth <- read("ToothGrowth", package = "datasets")
```

```{r tab_h2, exercise = TRUE}
# Importation du jeu de donn√©es ToothGrowth
tooth_growth <- read("ToothGrowth", package = "datasets")
# Tableau
tooth_growth %>.%
  ___(., dose,___) %>.%
  summarise(., mean = ___(___), ___ = sd(___), n = n())
```

```{r tab_h2-hint-1}
# Importation du jeu de donn√©es ToothGrowth
tooth_growth <- read("ToothGrowth", package = "datasets")
# Tableau
tooth_growth %>.%
  group_by(., dose, ___) %>.%
  summarise(., mean = ___(___), ___ = sd(___), n = n())
```

```{r tab_h2-solution}
# Importation du jeu de donn√©es ToothGrowth
tooth_growth <- read("ToothGrowth", package = "datasets")
# tableau
tooth_growth %>.%
  group_by(., dose, supp) %>.%
  summarise(., mean = mean(len), sd = sd(len), n = n())
```

```{r tab_h2-check}
grade_code("Bien jou√© !")
```

## Test de Student

D√©terminez si la croissance des dents de cochons d'inde est similaire au seuil $\alpha$ de 0.05% lors de l'utilisation du suppl√©ment jus d'orange (OJ) par rapport au suppl√©ment vitamine C (VC). Utilisez un test t de Student bilat√©ral et de variance similaire.

En partant du jeu de donn√©es propos√© ci-dessous qui porte sur la croissance des dents de cochons d'Inde, reproduisez le tableau ci-dessous.

```{r, echo=TRUE}
# Importation du jeu de donn√©es ToothGrowth
tooth_growth <- read("ToothGrowth", package = "datasets")
```

Le tableau de donn√©es comprend les variables suivantes : `r colnames(tooth_growth)` 

```{r toothgrowth}
# Importation du jeu de donn√©es ToothGrowth
(tooth_growth <- read("ToothGrowth", package = "datasets"))
```

üí¨ **Un snippet peut vous aider √† r√©aliser cet exercice.**

```{r ttest, exercise = TRUE, exercise.setup = "toothgrowth"}
t.test(data = ___, ___ ~ ___,
  alternative = ___, conf.level = ___, var.equal = TRUE)
```

```{r ttest-solution}
t.test(data = tooth_growth, len ~ supp,
  alternative = "two.sided", conf.level = 0.95, var.equal = TRUE)
```

```{r ttest-check}
grade_code("Bien jou√© !")
```

```{r quiz6}
quiz(
  question("Est ce que la croissance des dents de cochons d'Inde est similaire ?",
           answer("oui", correct = TRUE),
           answer("non"),
           allow_retry = TRUE,
           incorrect = "Recommencez afin de trouver la bonne r√©ponse",
           correct = "Bravo, c'est correct"),
  question("Rejettez vous $H_0$ ?",
           answer("oui"),
           answer("non", correct = TRUE),
           allow_retry = TRUE,
           incorrect = "Recommencez afin de trouver la bonne r√©ponse",
           correct = "Bravo, c'est correct")
)
```

## Conclusion

Bravo! Vous venez de terminer votre s√©ance d'exercices dans un tutoriel "learnr". 

```{r comm_noscore, echo=FALSE}
question_text(
  "Laissez-nous vos impressions sur cet outil p√©dagogique",
  answer("", TRUE, message = "Pas de commentaires... C'est bien aussi."),
  incorrect = "Vos commentaires sont enregistr√©s.",
  placeholder = "Entrez vos commentaires ici...",
  allow_retry = TRUE
)
```

